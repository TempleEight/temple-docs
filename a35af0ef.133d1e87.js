(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{160:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return u}));var r=n(1),a=n(11),o=(n(0),n(176)),i={id:"temple-test",title:"Temple Test",sidebar_label:"Temple Test"},l={id:"guide/temple-test",title:"Temple Test",description:"In addition to automatic generation of microservice-based infrastructure, Temple also offers a tool for testing the generated code.",source:"@site/docs/guide/temple-test.md",permalink:"/temple-docs/docs/guide/temple-test",editUrl:"https://github.com/TempleEight/temple-docs/edit/master/TempleEight/docs/guide/temple-test.md",sidebar_label:"Temple Test",sidebar:"docsSidebar",previous:{title:"Structs",permalink:"/temple-docs/docs/guide/structs"},next:{title:"Value Annotations",permalink:"/temple-docs/docs/guide/value-annotations"}},s=[{value:"Full Testing Mode",id:"full-testing-mode",children:[]},{value:"Request Only Mode",id:"request-only-mode",children:[]},{value:"How Temple Test Works",id:"how-temple-test-works",children:[]}],c={rightToc:s};function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"In addition to automatic generation of microservice-based infrastructure, Temple also offers a tool for testing the generated code."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"temple test")," has two main operating modes:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"A full testing mode, where it will spin up the infrastructure locally, mock a request to each endpoint and then shut the infrastructure down.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"A request only mode, where the infrastructure is assumed to already be running, and only mock requests are sent to each endpoint."))),Object(o.b)("p",null,"This is particularly useful to mock some requests to your service, or to test a change you may have made in the business logic."),Object(o.b)("p",null,"In this short guide, we'll show you how to use ",Object(o.b)("inlineCode",{parentName:"p"},"temple test")," with the project generated in the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"../getting-started"}),"Getting Started")," guide."),Object(o.b)("h2",{id:"full-testing-mode"},"Full Testing Mode"),Object(o.b)("p",null,"To access full testing mode, simply run the following command from the directory you generated the project in:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"\u276f\u276f\u276f temple test example.temple\n\ud83d\udc33 Spinning up Docker Compose infrastructure...\n\ud83e\udd8d Configuring Kong\n\ud83e\uddea Testing ExampleService service\n    \u2705 ExampleService create\n    \u2705 ExampleService read\n    \u2705 ExampleService update\n    \u2705 ExampleService delete\n    \u2705 ExampleService readability\n    \u2705 ExampleService writablity\n\ud83c\udf89 Everything passed\n\ud83d\udc80 Shutting down Docker Compose infrastructure...\n")),Object(o.b)("p",null,"As you can see from the output, this performs a request to each endpoint within each service, validating the request and response match the expected values.\nIt also makes a series of requests which validate the access control settings put in place, to ensure that an unauthorized user is unable to access entities it does not own.\nMore information about this can be found in our ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"access-control"}),"Access Control")," guide."),Object(o.b)("h2",{id:"request-only-mode"},"Request Only Mode"),Object(o.b)("p",null,"Running in request only mode requires the addition of a flag to the ",Object(o.b)("inlineCode",{parentName:"p"},"temple test")," command.\nThis assumes that the infrastructure is running locally, and will not shut it down after the test are completed:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"\u276f\u276f\u276f temple test --testOnly example.temple\n\ud83e\uddea Testing ExampleService service\n    \u2705 ExampleService create\n    \u2705 ExampleService read\n    \u2705 ExampleService update\n    \u2705 ExampleService delete\n    \u2705 ExampleService readability\n    \u2705 ExampleService writablity\n\ud83c\udf89 Everything passed\n")),Object(o.b)("h2",{id:"how-temple-test-works"},"How Temple Test Works"),Object(o.b)("p",null,"The Temple test command works by mocking request bodies according to the attributes within the Templefile.\nIt will randomly generate suitable values, using any upper or lower bounds provided as ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"value-constraints"}),"Value Constraints"),", and populate a JSON object with these values."),Object(o.b)("p",null,"After making the request, it will ensure that the response object matches what is expected, validating that any values passed in the request are also included in the response, removing any values with annotations.\nSee the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"value-constraints"}),"Value Constraints")," guide for more on these."))}u.isMDXComponent=!0},176:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return b}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),u=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},p=function(e){var t=u(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=r,b=p["".concat(i,".").concat(m)]||p[m]||d[m]||o;return n?a.a.createElement(b,l({ref:t},c,{components:n})):a.a.createElement(b,l({ref:t},c))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);