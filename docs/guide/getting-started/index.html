<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Getting Started</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Temple · makes it easy to get new microservices up and running, at lightning speed"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="import useBaseUrl from &#x27;@docusaurus/useBaseUrl&#x27;;"><meta data-react-helmet="true" property="og:description" content="import useBaseUrl from &#x27;@docusaurus/useBaseUrl&#x27;;"><meta data-react-helmet="true" property="og:url" content="https://templeeight.github.io/temple-docs//temple-docs/docs/guide/getting-started">

<link data-react-helmet="true" rel="shortcut icon" href="/temple-docsimg/favicon.ico">


<link rel="stylesheet" href="/temple-docsstyles.567c7204.css">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}function e(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}var n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener((function(n){null===e()&&t(n.matches?"dark":"")}));var a=e();null!==a?t(a):n.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/temple-docs"><img class="navbar__logo" src="/temple-docsimg/temple.svg" alt="Temple Logo"><strong>Temple</strong></a><a class="navbar__item navbar__link" href="/temple-docsdocs/welcome">Docs</a><a class="navbar__item navbar__link" href="/temple-docsblog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/TempleEight/temple">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/temple-docs"><img class="navbar__logo" src="/temple-docsimg/temple.svg" alt="Temple Logo"><strong>Temple</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/temple-docsdocs/welcome">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docsblog">Blog</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/TempleEight/temple">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">The Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/welcome">Welcome</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/installation">Installation Guide</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/temple-docs/docs/guide/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/access-control">Access Control</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/authentication">Service Authentication</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/cross-service-coms">Cross-Service Communication</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/enumeration">Enumeration</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/metrics">Viewing Service Metrics</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/orchestration">Deploying Services</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/value-annotations">Value Annotations</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/business-logic">Business Logic</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/custom-handlers">Custom Handlers and DAO Methods</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/reference/contents">Contents</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/reference/templefile-spec">Templefile Specification</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/reference/primitives">Primitives</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Getting Started</h1></header><div class="markdown"><p>Welcome to the complete Temple getting started guide!</p><p>This tutorial will walk you through developing your own applications with Temple, from start to finish.</p><p>We&#x27;re going to assume you&#x27;ve already installed the Temple CLI, as per the <a href="../installation">Installation Guide</a>. </p><blockquote><p>If you&#x27;d like to verify this, run <code>temple --version</code>, output should be <code>temple X.X.X (c) 2020 TempleEight</code></p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="project-setup"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#project-setup" title="Direct link to heading">#</a>Project Setup</h2><p>Temple projects start their life as an empty directory. Let&#x27;s make one for this tutorial:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents ❯❯❯ mkdir temple-tutorial</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents ❯❯❯ cd temple-tutorial</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents/temple-tutorial ❯❯❯</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="templefile"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#templefile" title="Direct link to heading">#</a>Templefile</h2><p>The Templefile is the heart of the project, it contains all of the information the Temple CLI uses to build your application files.</p><p>A Templefile is any text file with the <code>.temple</code> extension. </p><p>For a full reference of the Templefile language, check out the <a href="../reference/templefile-spec">Templefile Spec</a>.</p><p>We&#x27;ll build an example Templefile from the ground up with minimal features, and add more over the rest of the guides.</p><p>The two top level entries in a Templefile are <em>projects</em> and <em>services</em>.
A Templefile has exactly one project block, and can have many service blocks.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="project-block"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#project-block" title="Direct link to heading">#</a>Project Block</h3><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ExampleProject: project {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  #language(go);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  #database(postgres);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  #provider(dockerCompose);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>The first thing required in a Templefile is the project block. This instantiates the whole project to Temple and gives some project-level metadata.</p><p>At the top level, we write <code>ExampleProject: project</code>, which defines a new <code>project</code> called <code>ExampleProject</code>.
This is the name Temple uses for your project globally.</p><p>Then, inside the project block there are a number of metadata items that tell us things about the project on a global scale.</p><p>Metadata definitions begin with <code>#</code> characters and tell us something about a project or a service, and how it interacts with other services.
For a full list of all valid metadata, see the <a href="../reference/templefile-spec">Templefile Spec</a>.</p><p>Here, we define the server language for all services to be Golang, and the database backing everything up to be Postgres.
While these two blocks are defined on the project level, they can also be overridden at the service level, if you for example wanted a certain service to be in a different language.
The final metadata item is the <code>#provider</code> block, which specifies that all of the services in this project should be orchestrated with <code>docker-compose</code>.
This is a project level item only, and can&#x27;t be overridden at the service level.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="service-blocks"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#service-blocks" title="Direct link to heading">#</a>Service Blocks</h3><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ExampleService: service {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  foo: string;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  bar: int;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>The next thing to add is a Service Block.
Each service block in a Templefile defines one generated microservice. </p><p>The opening statement <code>TestService: service</code> defines a new service, named <code>ExampleService</code>, which is the name Temple will use to refer to this service.</p><p>Service block can contain two kinds of declarations: <em>Property definitions</em> and <em>metadata</em>. </p><p>Property declarations tell us about the kind of data belonging to the entity this service describes.
For example, here we say that <code>ExampleService</code> has a <code>foo</code>  which is a <code>string</code> property, and a <code>bar</code>, which is an <code>int</code> property.
Property declarations can either be a <a href="../reference/primitives"><em>primitive</em> datatype</a>, or be a <a href="cross-service-coms"><em>foreign key</em></a> to another service.</p><p>Every service in Temple also has an implicit <code>id</code> property, which assigns a <code>UUID</code> to each entity stored in a service, used for foreign keys and authentication.</p><blockquote><p>Note: Variable names (project names, service names and property names) can clash with reserved keywords in the languages Temple generates into.
To mitigate this, the Temple CLI will automatically rename any conflicting variables to <code>$projectName-$variableName</code>.</p></blockquote><p>All together, our example Templefile is:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ExampleProject: project {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  #language(go);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  #database(postgres);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  #provider(dockerCompose);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ExampleService: service {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  foo: string;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  bar: int;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="running-the-example"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#running-the-example" title="Direct link to heading">#</a>Running The Example</h2><p>Now that we have created our example Templefile, save it in a file named <code>example.temple</code>, in our <code>temple-tutorial</code> directory created earlier.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="validating-the-templefile"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#validating-the-templefile" title="Direct link to heading">#</a>Validating the Templefile</h3><p>The Temple CLI contains a tool for validating your Templefile before generating any code. We can invoke this tool by running:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents/temple-tutorial ❯❯❯ temple validate example.temple</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Templefile validated correctly</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>This means our Templefile is syntactically correct, and we can begin to generate all the code we need.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="generating-code"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#generating-code" title="Direct link to heading">#</a>Generating Code</h3><p>At this point, we can begin to generate some code. Running the following will begin generating code: </p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents/temple-tutorial ❯❯❯ temple generate example.temple</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>The first thing we&#x27;ll see is the CLI prompting us to give some further generation details that are specific to the metadata selections made in our Templefile. </p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents/temple-tutorial ❯❯❯ temple generate example.temple</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">What should the Go module name be? (expected format &quot;github.com/username/repo&quot;)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>We need to enter the name of the Golang module we&#x27;ll be generating into for our project, this can be anything, but standards dictate it should be the GitHub URL of where this project will be hosted. </p><p>For this example enter <code>github.com/temple/tutorial</code>. </p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents/temple-tutorial ❯❯❯ temple generate example.temple</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">What should the Go module name be? (expected format &quot;github.com/username/repo&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">github.com/temple/tutorial</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Generated project in /path/Documents/temple-tutorial</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>Now we can view the generated outputs of our project:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents/temple-tutorial ❯❯❯ ls -1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">api</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">deploy.sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose.yml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">example-service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">example-service-db</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">example.temple</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kong</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="output-breakdown"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#output-breakdown" title="Direct link to heading">#</a>Output Breakdown</h3><p>We&#x27;ll break these outputs down to understand what each one means. </p><ul><li><p><code>/example-service/</code> - This directory contains the Go code for the <code>ExampleService</code> we defined earlier.
A full description of this can be seen in the <a href="../reference/golang">Golang Reference</a></p></li><li><p><code>/example-service-db/</code> - This directory contains the SQL init scripts for the database backing the <code>ExampleService</code>.
These scripts manage the database schema and define which fields are stored.</p></li><li><p><code>/api/</code> -This directory contains the OpenAPI specification for the project, used for generating target application code.
Full details can be seen in the <a href="../reference/openapi">OpenAPI Reference</a></p></li><li><p><code>/kong/</code> - Temple projects use <a href="https://konghq.com/kong/">Kong</a> as an API Gateway, which routes traffic from outside of the application to the correct microservice internally.
The <code>kong</code> directory contains a configuration script that needs to run after all services have been deployed.
It informs Kong on the hostnames of the services and which API endpoints route to which services.
Full details are available in the <a href="ingress">Ingress Guide</a>.</p></li><li><p><code>/docker-compose.yml</code> - This file defines how to orchestrate all of the services in <code>docker-compose</code>, including Kong.
If Kubernetes were used instead of <code>docker-compose</code> for orchestration, this file would be replaced with a <code>kube</code> folder.
See the <a href="orchestration">Orchestration Guide</a>. </p></li><li><p><code>/deploy.sh</code> - This shell script is an automated way to deploy the application <strong>for local development</strong> , including running all initialization steps and setting environment variables. </p></li></ul><blockquote><p>Run <code>source deploy.sh</code> to bring up your orchestrated services and set required environment variables to make requests.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="application-description"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#application-description" title="Direct link to heading">#</a>Application Description</h2><p>What we&#x27;ve generated here is a microservice that exposes 4 API endpoints.
Each endpoint performs one of the CRUD (Create, Read, Update, Delete) operations respectively, on valid data that matches the description given in the Templefile.</p><p>As all of the HTTP requests are routed through the Kong API Gateway (See the <a href="ingress">Ingress Guide</a>), we address the requests in the form Kong requires.
This format is: <code>$KONG_ENTRY_URL/api/$service_name/$endpoint</code>.
The <code>$KONG_ENTRY_URL</code> is set in an environment variable called <code>$KONG_ENTRY</code> automatically by the <code>deploy.sh</code> script.</p><p>The (very simple) architecture of our system is described in the below diagram: </p><img alt="Tutorial System Architecture" src="/temple-docsimg/tutorial-architecture.png"><p>In our example, we have one microservice: <code>ExampleService</code>.
It consists of a Go server, that listens for requests on 4 endpoints, processes the data, and interacts with it&#x27;s database to serve the request appropriately.</p><p>These 4 endpoints are:</p><ul><li><code>POST /api/example-service</code> - Create a new item in the example service.
The request should include data in JSON format, of a form that matches what we specified in the Templefile. That is:</li></ul><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;foo&quot;: string,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;bar&quot;: int</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>  This returns a confirmation from the server of the form:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">200 OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: UUID,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;foo&quot;: string,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;bar&quot;: int</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>  Showing that the request completed successfully.
The <code>id</code> returned can be used to make future queries on this data.</p><ul><li><code>GET /api/example-service/{id}</code> - Query an existing item from the database with a given <code>id</code>.
If an item exists in the database with that <code>id</code>, it will be returned in the form:</li></ul><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">200 OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: UUID,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;foo&quot;: string,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;bar&quot;: int</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><ul><li><code>PATCH /api/example-service/{id}</code> - Update an existing item in the database with a given <code>id</code>.
The request should contain data in JSON format, containing the new values to update the entry to.</li></ul><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;foo&quot;: string,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;bar&quot;: int</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>If the entry exists in the database, the result will be:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">200 OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: UUID,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;foo&quot;: string,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;bar&quot;: int</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><ul><li><code>DELETE /api/example-service/{id}</code> - Delete an existing item in the database with a given <code>id</code>.
If the entry exist in the database, the result will be:</li></ul><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">200 OK</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><blockquote><p>The OpenAPI specification generated in the <code>/api</code> project folder contains a full API Schema of every endpoint available in your application, their parameters and return data.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="running-the-application"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#running-the-application" title="Direct link to heading">#</a>Running the application</h2><p>Now that we&#x27;ve generated some application code, we can run it and test that it works as we intended.</p><p>Make sure the Docker daemon is running (<a href="https://docs.docker.com/get-docker/">installation instructions</a>) and follow along.</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents/temple-tutorial ❯❯❯ source deploy.sh</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>The following output details all of the microservices being built with Docker, automatic waiting until all services are available, and then running the <code>kong</code> initialisation scripts.</p><p>Let&#x27;s check that the services are running:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents/temple-tutorial ❯❯❯ docker ps --format &#x27;{{.Image}}&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kong:2.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">postgres:12.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">postgres:12.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">temple-tutorial_example-service</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>And everything seems to be looking good.</p><p>We can check that the entry point environment variables are set correctly:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents/temple-tutorial ❯❯❯ echo $KONG_ENTRY</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">localhost:8000</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>This address is the Kong entrypoint. By addressing all of our API requests here, Kong will automatically forward it on to the correct microservice.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="making-requests"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#making-requests" title="Direct link to heading">#</a>Making Requests</h3><p>In order to make a request to the application, we send a HTTP request to the Kong entrypoint URL with the correct data. </p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents/temple-tutorial ❯❯❯ curl -X POST  $KONG_ENTRY/api/example-service -d &#x27;{&quot;foo&quot; : &quot;Hello Temple!&quot;, &quot;bar&quot; : 123}&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;id&quot;:&quot;e3621abe-7e40-11ea-9934-0242c0a88002&quot;,&quot;foo&quot;:&quot;Hello Temple!&quot;,&quot;bar&quot;:123}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>Shows that we have created a new entry in <code>ExampleService</code>, with the <code>foo</code> property set to &quot;Hello Temple!&quot; and the <code>bar</code> property set to 123.
The response from the application also shows the <code>UUID</code> for this entity, automatically assigned by the service, which we can use to refer to this entity in further requests.</p><p>For example, sending a <code>GET</code> request to the service with the entity&#x27;s <code>id</code>, returns us the data.</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents/temple-tutorial ❯❯❯ curl -X GET $KONG_ENTRY/api/example-service/e3621abe-7e40-11ea-9934-0242c0a88002</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;id&quot;:&quot;e3621abe-7e40-11ea-9934-0242c0a88002&quot;,&quot;foo&quot;:&quot;v&quot;,&quot;bar&quot;:1689563322}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>The full list of all generated endpoints is detailed in the <a href="ingress">Ingress Guide</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="automated-testing"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#automated-testing" title="Direct link to heading">#</a>Automated Testing</h2><p>Another tool contained in the Temple CLI is the automated testing tool.
Temple will take the data model defined in the Templefile, as well as the generated sources and will automatically make requests that meet the format of the data, verifying that the returned values is as expected.
It can be a very useful way of end-to-end testing the application, verifying all components are functioning correctly.</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/Documents/temple-tutorial ❯❯❯ temple test example.temple</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">🐳 Spinning up Docker Compose infrastructure...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">🧪 Testing ExampleService service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✅ ExampleService create</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✅ ExampleService read</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✅ ExampleService update</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✅ ExampleService delete</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">🎉 Everything passed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">💀 Shutting down Docker Compose infrastructure...</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="next-steps"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#next-steps" title="Direct link to heading">#</a>Next Steps</h2><p>This concludes our end to end walkthrough of the Temple ecosystem. For next steps, continue through the more advanced pages of the tutorial, or jump ahead:</p><ul><li>Add <a href="access-control">Access Control</a> to your services, and learn to <a href="enumeration">Enumerate services by others</a></li><li>Implement security policies through through the <a href="authentication">Authentication Guide</a></li><li>Create complex relationships between entities with the <a href="cross-service-coms">Cross-Service Communication Guide</a></li><li>Take a look at expanding the generated application with custom business logic in the <a href="business-logic">Business Logic Guide</a></li><li>Constrain the values allowed to be stored by your services in the <a href="value-annotations">Value Annotations Guide</a></li><li>Try different orchestration methods, described in the <a href="orchestration">Orchestration Guide</a></li><li>Implement a metrics monitoring suite, detailed in the <a href="metrics">Metrics Guide</a></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/TempleEight/temple-docs/edit/master/TempleEight/docs/guide/getting-started.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/temple-docs/docs/installation"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« Installation Guide</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/temple-docs/docs/guide/access-control"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Access Control »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#project-setup" class="contents__link">Project Setup</a></li><li><a href="#templefile" class="contents__link">Templefile</a><ul><li><a href="#project-block" class="contents__link">Project Block</a></li><li><a href="#service-blocks" class="contents__link">Service Blocks</a></li></ul></li><li><a href="#running-the-example" class="contents__link">Running The Example</a><ul><li><a href="#validating-the-templefile" class="contents__link">Validating the Templefile</a></li><li><a href="#generating-code" class="contents__link">Generating Code</a></li><li><a href="#output-breakdown" class="contents__link">Output Breakdown</a></li></ul></li><li><a href="#application-description" class="contents__link">Application Description</a></li><li><a href="#running-the-application" class="contents__link">Running the application</a><ul><li><a href="#making-requests" class="contents__link">Making Requests</a></li></ul></li><li><a href="#automated-testing" class="contents__link">Automated Testing</a></li><li><a href="#next-steps" class="contents__link">Next Steps</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/temple-docsdocs/doc1">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/temple-docsdocs/doc2">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/tagged/docusaurus">Stack Overflow</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://discordapp.com/invite/docusaurus">Discord</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/temple-docsblog">Blog</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/facebook/docusaurus">GitHub</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://twitter.com/docusaurus">Twitter</a></li></ul></div></div><div class="text--center">Copyright © 2020 TempleEight. Built with Docusaurus.</div></div></footer>
</div>

<script src="/temple-docsstyles.cb7fffff.js"></script>

<script src="/temple-docsruntime~main.346c78d7.js"></script>

<script src="/temple-docsmain.3b039cd3.js"></script>

<script src="/temple-docs1.67d7cf31.js"></script>

<script src="/temple-docs2.0d53b13b.js"></script>

<script src="/temple-docs1be78505.ef308e07.js"></script>

<script src="/temple-docs35dd2a9b.1a716315.js"></script>

<script src="/temple-docs17896441.2ec8387c.js"></script>

<script src="/temple-docsd8224fc8.56d87acf.js"></script>


</body>
</html>