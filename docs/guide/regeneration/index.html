<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Regeneration</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Temple · Generate microservice systems at lightning speed"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="In addition to generating code from a Templefile a single time at the beginning of project development, the Temple CLI also allows for regeneration of code later in the cycle."><meta data-react-helmet="true" property="og:description" content="In addition to generating code from a Templefile a single time at the beginning of project development, the Temple CLI also allows for regeneration of code later in the cycle."><meta data-react-helmet="true" property="og:url" content="https://templeeight.github.io/temple-docs//temple-docs/docs/guide/regeneration">

<link data-react-helmet="true" rel="shortcut icon" href="/temple-docs/img/favicon.ico">


<link rel="stylesheet" href="/temple-docs/styles.ddb08ecb.css">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/temple-docs/"><img class="navbar__logo" src="/temple-docs/img/temple.svg" alt="Temple Logo"><strong>Temple</strong></a><a class="navbar__item navbar__link" href="/temple-docs/docs/introduction">Docs</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/TempleEight/temple">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/temple-docs/"><img class="navbar__logo" src="/temple-docs/img/temple.svg" alt="Temple Logo"><strong>Temple</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/introduction">Docs</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/TempleEight/temple">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/access-control">Access Control</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/adding-dao-functions">Adding DAO Functions</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/adding-endpoints">Adding Endpoints</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/authentication">Authentication</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/enumeration">Enumeration</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/foreign-keys">Foreign Keys &amp; Inter-Service Communication</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/hooks">Business Logic &amp; Hooks</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/omitting-endpoints">Omitting Endpoints</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/open-api">OpenAPI Generation</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/orchestration">Orchestration</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/temple-docs/docs/guide/regeneration">Regeneration</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/structs">Structs</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/temple-test">Temple Test</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/value-annotations">Value Annotations</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/guide/value-constraints">Value Constraints</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Generated Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/arch/system">System Architecture</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/arch/service">Service Architecture</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/reference/templefile-spec">Templefile Specification</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/reference/templefile-primitives">Templefile Primitives</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Example Templefiles</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/reference/example-templefiles/airbnb">Airbnb</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/reference/example-templefiles/amazon">Amazon</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/reference/example-templefiles/deliveroo">Deliveroo</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/reference/example-templefiles/five-a-side">5-a-Side</a></li><li class="menu__list-item"><a class="menu__link" href="/temple-docs/docs/reference/example-templefiles/lockdown-shopping">Lockdown Shopping</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Regeneration</h1></header><div class="markdown"><p>In addition to generating code from a Templefile a single time at the beginning of project development, the Temple CLI also allows for regeneration of code later in the cycle.
This means that if you generate a project, but then want to later add an additional service, or a property on that service, Temple will allow you to regenerate code reflecting any changes to the original Templefile. </p><p>During this process, Temple will regenerate <em>all</em> project files, overwriting any existing ones, with a few key exceptions:</p><ul><li><p>The <em>setup</em> source file, in any existing service</p></li><li><p>The <em>datastore</em> source file, in any existing service</p></li><li><p>Any file that belongs to a service that has been deleted from the Templefile since the last generation event.</p></li></ul><p>As the setup and datastore source files do not change based on the contents of the Service they&#x27;re generated from, they can be safely omitted from the regeneration process without risk of breaking changes. </p><p>This also allows the user to add their own custom business logic (as per the <a href="hooks">Business Logic &amp; Hooks</a> guide) in these two files, which persists between generation events.
However it is very possible that the business logic that exists may not be correct after regeneration, reflecting changes to the properties of a service, etc.</p><p>To invoke the regeneration process, simply run <code>temple generate</code> with an output directory that already contains an existing temple project.</p><p>For example, first generate the project the first time:</p><pre class="mdxCodeBlock_iHAB"><div><pre class="prism-code language-bash codeBlock_19pQ" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">❯❯❯ temple generate example.temple</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">What should the Go module name be? </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">expected </span><span class="token function" style="color:rgb(220, 220, 170)">format</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;github.com/username/repo&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">github.com/temple/tutorial</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">Generated project </span><span class="token keyword" style="color:rgb(86, 156, 214)">in</span><span class="token plain"> /path/Documents/temple-tutorial</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>Then, make some changes to a setup or datastore source file. We&#x27;ll change the <code>example-service/setup.go</code> file:</p><pre class="mdxCodeBlock_iHAB"><div><pre class="prism-code language-go codeBlock_19pQ" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">package</span><span class="token plain"> main</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;fmt&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;github.com/gorilla/mux&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">env </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">env</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">setup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">router </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">mux</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Router</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// Add user defined code here</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    fmt</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">Printf</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Hello, World!\n&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>Next, we&#x27;re going to regenerate the project, but we&#x27;ll notice that the changes we just made will persist.</p><pre class="mdxCodeBlock_iHAB"><div><pre class="prism-code language-bash codeBlock_19pQ" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">❯❯❯ temple generate example.temple</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">What should the Go module name be? </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">expected </span><span class="token function" style="color:rgb(220, 220, 170)">format</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;github.com/username/repo&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">github.com/temple/tutorial</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">The output directory already contains some files that are going to be generated.</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">This process will overwrite them.</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">These files will not be touched to preserve business logic:</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">➤ example-service/dao/datastore.go</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">➤ example-service/setup.go</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">Do you want to continue? </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">Y/N</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">y</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p> If we check the file we changed earlier, we&#x27;ll see that the changes we made are still present.</p><pre class="mdxCodeBlock_iHAB"><div><pre class="prism-code language-go codeBlock_19pQ" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">package</span><span class="token plain"> main</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;fmt&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;github.com/gorilla/mux&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">env </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">env</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">setup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">router </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">mux</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Router</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// Add user defined code here</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    fmt</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">Printf</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Hello, World!\n&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/TempleEight/temple-docs/edit/master/TempleEight/docs/guide/regeneration.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/temple-docs/docs/guide/orchestration"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« Orchestration</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/temple-docs/docs/guide/structs"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Structs »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center">Copyright © 2020 TempleEight. Built with Docusaurus.</div></div></footer>
</div>

<script src="/temple-docs/styles.32292baf.js"></script>

<script src="/temple-docs/runtime~main.d3cb0c4b.js"></script>

<script src="/temple-docs/main.5f6d72fb.js"></script>

<script src="/temple-docs/1.3ca00519.js"></script>

<script src="/temple-docs/35.be8cccf3.js"></script>

<script src="/temple-docs/35dd2a9b.8f40dd98.js"></script>

<script src="/temple-docs/17896441.b4599c21.js"></script>

<script src="/temple-docs/b98cdbcc.cd598a21.js"></script>


</body>
</html>